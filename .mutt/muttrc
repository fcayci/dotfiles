# muttrc - global configurations

# General            {{{

set mailcap_path     = ~/.mutt/mailcap
set tmpdir           = /tmp
set new_mail_command = "~/.mutt/scripts/new_mail.sh &"
#set alias_file       = ~/.mutt/alias
#set certificate_file = ~/.mutt/certificates
set editor           = "vim +/^$ ++1 +:noh +star"

# Make sure polls are not hogging mutt
set mail_check       = 90
set timeout          = 15
set read_inc         = 100
set write_inc        = 100
set mbox_type        = Maildir

set quit
set delete
set delete_untag
set print
unset wait_key
unset mark_old
unset pipe_decode
unset imap_check_subscribed
set send_charset="utf-8:iso-8859-1"
set rfc2047_parameters = yes

# }}}
# Index View Options {{{

set date_format      = "%m/%d %H:%M"
set index_format     = "[%Z] %D %-20.20F ⌜%s⌟"
set sort             = threads
set sort_aux         = reverse-last-date-received
set uncollapse_jump

# }}}
# Status Bar         {{{

set status_chars     = " *%A"
set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

# }}}
# Sidebar            {{{

set sidebar_visible  = yes
set sidebar_width    = 24
#set sidebar_divider_char = '|'
set sidebar_format   = "%D%?F? [%F]?%* %?N?%N/?%S "

# }}}
# Pager              {{{

set pager_index_lines = 10
set pager_context     = 3
set pager_stop
set nosmart_wrap
set menu_scroll
set tilde
unset markers
#alternative_order multipart/related text/enriched text/plain text/html
alternative_order text/plain text/enriched text/html

# }}}
# Compose Options    {{{

set hostname           = jazz
set edit_headers
set forward_format     = "Fwd: %s"
set attribution        = "On %d, %n wrote:"
unset mime_forward
set reply_to
set fast_reply
set askcc
set fcc_attach
set reverse_name
set include
set reply_regexp = "^((re|ynt)(\[[0-9]+\])*:[ \t]*)*"
set text_flowed
unset sig_dashes

# }}}
# Phonebook          {{{

set query_command  = "abook --mutt-query '%s'"

# }}}
# Autoviews          {{{

auto_view application/zip
auto_view application/x-gzip
auto_view application/x-gunzip
auto_view application/pgp-signature
auto_view application/pgp
auto_view application/octet-stream
auto_view application/x-zip-compressed
auto_view application/x-arj-compressed
auto_view application/x-tar-gz
auto_view application/ms-tnef
auto_view application/x-perl
auto_view application/x-sh
auto_view application/x-tcl
auto_view application/x-delphi-source
auto_view application/emacs-lisp
auto_view application/msword
auto_view text/x-patch
auto_view text/html
auto_view text/x-vcard
auto_view text/x-script.elisp
auto_view text/x-lisp
auto_view text/x-diff
auto_view image/tiff

# }}}
# Colors             {{{

color hdrdefault blue default
color quoted blue default
color signature blue default
color attachment green default
color prompt brightblue default
color message brightgreen default
color error red default
color indicator white brightblack
color status brightwhite black
color status red white '(New|Del|Flag):[0-9]+'
color tree white default
color normal color241 color240
color markers green default
color search white default
color tilde brightmagenta default
color index bold blue default ~F
color index bold blue default "~N|~O"
color index bold red default "~D"
color index_date none white default
color sidebar_highlight white black
color sidebar_indicator bold blue black
color sidebar_divider black default

# }}}
# Headers            {{{

# Ignore all headers
ignore *

# Then un-ignore the ones I want to see
unignore From:
unignore To:
#unignore Reply-To:
#unignore Mail-Followup-To:
unignore Subject:
unignore Date:
#unignore Organization:
#unignore Newsgroups:
unignore CC:
unignore BCC:
#unignore Message-ID:
#unignore X-Mailer:
#unignore User-Agent:
#unignore X-Junked-Because:
#unignore X-SpamProbe:
#unignore X-Virus-hagbard:

# Now order the visable header lines
unhdr_order *
hdr_order Date: From: To: CC: BCC: Subject:

# }}}
# Macros             {{{

# Better copy / move dialogs
macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"

# Ctrl-R to mark all as read
macro index \Cr "T~U<enter><tag-prefix><clear-flag>N<untag-pattern>.<enter>" "mark all messages as read"

macro index,pager      a "<pipe-message>abook --add-email-quiet<return>" "Add this sender to Abook"
macro index,pager      A "<save-message>=[Gmail]/All <enter><enter>" "Archive Message"
macro index,pager      F "<save-message>=[Gmail]/Starred<enter><enter>" "Star Message"
macro index,pager      ! "<save-message>=[Gmail]/Spam<enter><enter>" "Report spam"
macro index,pager      S "| ~/.scripts/save_mail.sh /tank/.mail/saved/<enter>"
 macro attach 'V' "<pipe-entry>iconv -c --to-code=UTF8 > ~/.cache/mutt/mail.html<enter><shell-escape>firefox ~/.cache/mutt/mail.html<enter>"
macro index,pager          <F4> "<pipe-message> ripmime -i - -d /tank/.mail/saved/" "Save all non-text attachments using ripmime"
macro pager          \cu "<pipe-message> urlscan<Enter>" "call urlscan to extract URLs out of a message"

bind index             g  noop
bind index       <space>  noop
bind index       <space>  collapse-thread
bind index         <tab>  sync-mailbox
bind index            gg  first-entry
bind index             G  last-entry
bind index          <F5>  imap-fetch-mail
bind compose           p  postpone-message
bind index             P  recall-message

bind index,pager       s  flag-message
bind index,pager       m  mail
bind index,pager       @  compose-to-sender
bind index,pager    <F2>  sidebar-toggle-visible
bind index,pager  <down>  sidebar-next
bind index,pager    <up>  sidebar-prev
bind index,pager <right>  sidebar-open
bind index,pager  <left>  noop
bind index,pager       R  group-reply

bind pager       <space>  noop
bind pager             k  previous-line
bind pager             j  next-line
bind pager             g  noop
bind pager            gg  top
bind pager             G  bottom

bind editor        <Tab>  complete-query

bind attach     <return>  view-mailcap
# }}}
# Includes           {{{

source /usr/share/doc/neomutt/samples/gpg.rc
source ~/.mutt/accounts/gmail

# }}}
